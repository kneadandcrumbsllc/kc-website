<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery - Knead & Crumbs</title>

    <!-- Font Awesome Free CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Header will load here -->
    <div id="header"></div>

	<!-- Content Section -->
	<div class="section" id="content">
		<h2>Gallery</h2>

		<!-- Rotating Image Gallery -->
		<div class="gallery-carousel">
			<div class="gallery-slides">
				<img src="img/gallery/1.jpg" alt="Everything Bagels">
				<img src="img/gallery/2.jpg" alt="Chocolate Chip Cookies">
				<img src="img/gallery/3.jpg" alt="Alexandra">
				<img src="img/gallery/4.jpg" alt="Scott">
				<img src="img/gallery/5.jpg" alt="Cookie Cake">
				<img src="img/gallery/6.jpg" alt="Cupcakes">
				<img src="img/gallery/7.jpg" alt="Marshmallow Treats">
				<img src="img/gallery/8.jpg" alt="S'mores Bite">
				<img src="img/gallery/9.jpg" alt="Plain Bagels">
				<img src="img/gallery/10.jpg" alt="Cupcakes">
				<img src="img/gallery/11.jpg" alt="Chocolate Coated Pretzels">
				<img src="img/gallery/12.jpg" alt="Cookies">
				<img src="img/gallery/13.jpg" alt="Cookies">
				<img src="img/gallery/14.jpg" alt="Muffins">
				<img src="img/gallery/15.jpg" alt="Crumb Cake">
				<img src="img/gallery/16.jpg" alt="Bagels">
				<img src="img/gallery/17.jpg" alt="Muffin">
				<img src="img/gallery/18.jpg" alt="Cupcakes">
			</div>
			<!-- Navigation Dots -->
			<div class="gallery-dots">
			</div>
		</div>
	</div>
	<script>
		document.addEventListener("DOMContentLoaded", () => {
			let currentSlide = 0;
			const slidesContainer = document.querySelector(".gallery-slides");
			const slides = document.querySelectorAll(".gallery-slides img");
			const dotsContainer = document.querySelector(".gallery-dots");
			const carousel = document.querySelector(".gallery-carousel");
			let slideInterval = null; // Store single interval

			// Generate dots dynamically
			slides.forEach((_, index) => {
				const dot = document.createElement("span");
				dot.classList.add("dot");
				if (index === 0) dot.classList.add("active");
				dot.addEventListener("click", () => {
					showSlide(index);
					resetInterval(); // Reset on dot click
				});
				dotsContainer.appendChild(dot);
			});

			const dots = document.querySelectorAll(".dot");

			function showSlide(index) {
			console.log(Date.now());
				currentSlide = (index + slides.length) % slides.length; // Wrap index
				slidesContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
				dots.forEach(dot => dot.classList.remove("active"));
				dots[currentSlide].classList.add("active");
			}

			function startInterval() {
				console.log('start');
				clearInterval(slideInterval); // Prevent stacking
				slideInterval = setInterval(() => {
					showSlide(currentSlide + 1);
				}, 4000);
			}

			function resetInterval() {
				console.log('reset');
				clearInterval(slideInterval);
				startInterval();
			}

			// Pause on hover
			carousel.addEventListener("mouseenter", () => clearInterval(slideInterval));
			carousel.addEventListener("mouseleave", () => startInterval());

			// Start auto-slide
			startInterval();
		});
	</script>

    <!-- Footer will load here -->
    <div id="footer"></div>

    <!-- JavaScript to load header/footer -->
    <script>
        async function loadComponent(id, file) {
            const response = await fetch(file);
            document.getElementById(id).innerHTML = await response.text();
        }
        loadComponent("header", "header.html");
        loadComponent("footer", "footer.html");
    </script>

</body>
</html>